<div class="card mb-5 <%= @result["success"] ? "bg-success text-light" : "bg-danger" %> col-10">
  <div id="result_card" class="card-body">
    <div class="card-title">
      <span id="mission-title" class="h3"><%= @result["name"] %> (<%= @data[:total] %>)</span>
      <button type="button" id="close_results" class="btn-close btn-close-white float-end" aria-label="Close" data-bs-toggle="tooltip" data-bs-placement="top" title="Cerrar"></button>
      <button type="button" id="copy_results" class="btn-no-style text-light float-end me-1" aria-label="Copy" data-bs-toggle="tooltip" data-bs-placement="top" title="Copiar resultado">
        <i class="bi bi-clipboard2-fill"></i>
      </button>
    </div>
    <div id="mission-text" class="card-text">
      <div class="row">
        <div class="col">
          <div class="factors <%= @data[:factors_list].values.all?(&:empty?) ? 'd-none' : nil %>">
            <div class="h5">
              <%= t('activerecord.attributes.recipe.factors') %>
            </div>
            <div>
              <% @data[:factors_list]&.each do |key, factors| %>
                <% case key.to_s %>
                <% when "double_plus" %>
                  <% factors&.each do |factor| %>
                    <u>◻️<%= factor.capitalize %></u>
                  <% end %>
                <% when "plus" %>
                  <% factors&.each do |factor| %>
                    ◻️<%= factor.capitalize %>
                  <% end %>
                <% when "minus" %>
                  <% factors&.each do |factor| %>
                    ◼️<%= factor.capitalize %>
                  <% end %>
                <% when "double_minus" %>
                  <% factors&.each do |factor| %>
                    <u>◼️<%= factor.capitalize %></u>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
          <div class="results <%= @fortune ? 'd-none' : nil %>">
            <div class="h5">
              <%= t('activerecord.attributes.recipe.results') %>
            </div>
            <div class="ms-2">
              <%= @result["result"] %>
            </div>
            <div id="results_list">
            </div>
          </div>
        </div>
        <div class="col">
          <div class="row">
            <% @data[:dice].each_with_index do |number, index| %>
              <div class="p-0" style="position: relative; width: 80px">
                <%= image_tag('d10.svg', alt: '10 sided dice', width: 80, height: 80) %>
                <div style="position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%); font-size: 24px" class="text-monospace <%= (index == 1) ? 'text-light fw-bolder' : 'text-muted '%>">
                  <%= number %>
                </div>
              </div>
            <% end %>
          </div>
          <div class="mt-2">
            <div class="float-start me-3">
              <div class="row <%= @fortune ? 'd-none' : nil %>"><strong>Dificultad:</strong></div>
              <div class="row <%= @fortune ? 'd-none' : nil %>"><strong>Tokens:</strong></div>
              <div class="row"><strong>Factores:</strong></div>
              <div class="row <%= @fortune ? 'd-none' : nil %>"><strong>Miscelánea:</strong></div>
              <div class="row <%= @fortune ? 'd-none' : nil %>"><strong>Roleo:</strong></div>
              <div class="row"><strong>Total:</strong></div>
            </div>
            <div class="cloat-end">
              <div class="row <%= @fortune ? 'd-none' : nil %>"><%= number_to_modifier(@data[:difficulty]) %> (<%= @options["difficulty"].find { |item| item["value"] == @data[:difficulty] }["name"].capitalize %>)</div>
              <div class="row <%= @fortune ? 'd-none' : nil %>"><%= number_to_modifier(@data[:tokens]) %></div>
              <div class="row"><%= number_to_modifier(@data[:factors]) %></div>
              <div class="row <%= @fortune ? 'd-none' : nil %>"><%= number_to_modifier(@data[:misc]) %></div>
              <div class="row <%= @fortune ? 'd-none' : nil %>"><%= number_to_modifier(@data[:role]) %></div>
              <div class="row"><%= number_to_modifier(@data[:total]) %></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
