const unitsData = <%= raw @options_armies['units'].to_json %>;

$(document).on('cocoon:after-insert', function(e, insertedItem, originalEvent) {
  $("select.units-select").on("change", function () {

    const unit = $(this).val();
    console.log(unit);

    var str = null
    var hp = null

    const selectId = $(this).attr("id");
    const index = selectId.split("_")[3];

    // Check if unit exists in unitsData
    if (unitsData[unit]) {
      var str = unitsData[unit]['str']
      var hp = unitsData[unit]['armour']
    }

    $('#army_units_attributes_' + index + '_strength').val(str);
    $('#army_units_attributes_' + index + '_hp').val(hp);
  });
});
